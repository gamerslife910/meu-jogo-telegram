<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EURODASH V11</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; text-align: center; }
        .lang-bar { display: flex; justify-content: center; gap: 8px; padding: 15px; background: #111; border-bottom: 2px solid #0f9; }
        .l-btn { background: #222; color: #0f9; border: 1px solid #0f9; padding: 6px 12px; border-radius: 8px; font-weight: bold; font-size: 12px; }
        .l-btn.active { background: #0f9; color: #000; }
        #bal { font-size: 45px; margin: 20px 0; font-weight: bold; }
        .main-img { width: 200px; height: 200px; border-radius: 40px; border: 4px solid #0f9; margin-bottom: 10px; }
        .main-img:active { transform: scale(0.95); }
        .tab { display: none; padding: 20px; padding-bottom: 100px; }
        .tab.active { display: block; }
        .item { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #000; border-top: 1px solid #222; padding-bottom: 20px; }
        .n-btn { flex: 1; padding: 20px; color: #555; font-weight: bold; }
        .n-btn.active { color: #0f9; }
    </style>
</head>
<body>

    <div class="lang-bar">
        <button class="l-btn active" id="pt" onclick="setL('pt')">PT</button>
        <button class="l-btn" id="en" onclick="setL('en')">EN</button>
        <button class="l-btn" id="ru" onclick="setL('ru')">RU</button>
    </div>

    <div id="pg-core" class="tab active">
        <div id="bal">0.00000</div>
        <img src="image_3.jpg" class="main-img" onclick="tap()">
        <p style="color:#0f9">ENERGY: <span id="eng">500</span></p>
    </div>

    <div id="pg-mkt" class="tab">
        <h2 id="m-title">MARKET</h2>
        <div id="list"></div>
    </div>

    <div class="nav">
        <div class="n-btn active" id="nb-c" onclick="sw('c')">CORE</div>
        <div class="n-btn" id="nb-s" onclick="sw('s')">MARKET</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let L = 'pt';
        const txt = {
            pt: { m: "MERCADO", b: "COMPRAR", n: ["Nó Micro","Rack Blade","Turbo Server","Cyber Station","Quantum Rig","Hub Neural","Núcleo Titan"] },
            en: { m: "MARKET", b: "UPGRADE", n: ["Micro Node","Blade Rack","Turbo Server","Cyber Station","Quantum Rig","Neural Hub","Titan Core"] },
            ru: { m: "РЫНОК", b: "КУПИТЬ", n: ["Микро Узел","Blade Стойка","Турбо Сервер","Кибер Станция","Квантовый Риг","Нейро Хаб","Ядро Титана"] }
        };

        firebase.initializeApp({
            apiKey: "AIzaSyDFpFu8sba50rqnJSstg--cLrNDG4ybmu8",
            authDomain: "eurodash-e466c.firebaseapp.com",
            databaseURL: "https://eurodash-e466c-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "eurodash-e466c",
            appId: "1:99813963051:web:fe96761e990aee01ec016e"
        });
        const db = firebase.database();
        const uid = tg.initDataUnsafe.user?.id || 22250;
        let u = { bal: 0, pps: 0, eng: 500, inv: [0,0,0,0,0,0,0] };
        const shop = [{p:0.05,g:0.0000001},{p:1,g:0.0000006},{p:10,g:0.0000075},{p:50,g:0.000045},{p:200,g:0.00021},{p:800,g:0.00095},{p:3000,g:0.0045}];

        function setL(l) {
            L = l;
            document.querySelectorAll('.l-btn').forEach(b => b.classList.toggle('active', b.id === l));
            document.getElementById('m-title').innerText = txt[l].m;
            if(document.getElementById('pg-mkt').classList.contains('active')) rd();
        }

        db.ref('users/'+uid).once('value', s => { if(s.exists()) u = s.val(); ui(); });

        function tap() {
            if(u.eng < 1) return;
            u.bal += 0.00005; u.eng -= 1;
            ui(); tg.HapticFeedback.impactOccurred('light');
        }

        function rd() {
            document.getElementById('list').innerHTML = shop.map((m,i) => `
                <div class="item">
                    <div style="text-align:left"><b>${txt[L].n[i]}</b><br><small>Lvl: ${u.inv[i]||0}</small></div>
                    <button onclick="buy(${i})" style="background:#0f9; border:none; padding:10px; border-radius:8px; font-weight:bold">${txt[L].b} €${m.p}</button>
                </div>
            `).join('');
        }

        function buy(i) {
            if(u.bal >= shop[i].p) {
                u.bal -= shop[i].p; u.pps += shop[i].g;
                u.inv[i] = (u.inv[i]||0)+1; rd(); ui();
            }
        }

        function ui() {
            document.getElementById('bal').innerText = u.bal.toFixed(5);
            document.getElementById('eng').innerText = Math.floor(u.eng);
        }

        function sw(t) {
            document.getElementById('pg-core').classList.toggle('active', t === 'c');
            document.getElementById('pg-mkt').classList.toggle('active', t === 's');
            document.getElementById('nb-c').classList.toggle('active', t === 'c');
            document.getElementById('nb-s').classList.toggle('active', t === 's');
            if(t === 's') rd();
        }

        setInterval(() => { u.bal += u.pps; if(u.eng < 500) u.eng += 0.5; ui(); }, 1000);
        setInterval(() => db.ref('users/'+uid).set(u), 5000);
    </script>
</body>
</html>
