<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EURODASH ULTIMATE V5</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js?update=9999"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
    
    <style>
        :root { --p: #00ff9d; --bg: #000; --accent: #ff5e00; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: white; font-family: 'Rajdhani', sans-serif; margin: 0; padding: 0; overflow: hidden; }

        /* SELETOR DE LÍNGUA NO TOPO */
        .v5-lang-bar { position: fixed; top: 10px; left: 10px; display: flex; gap: 5px; z-index: 10000; }
        .v5-lang-btn { background: #111; border: 1px solid #333; color: #666; padding: 5px 10px; border-radius: 5px; font-size: 10px; font-family: 'Orbitron'; }
        .v5-lang-btn.active { border-color: var(--p); color: var(--p); }

        /* SISTEMA DE FLUTUAÇÃO DE DINHEIRO */
        .v5-money-fly { position: absolute; pointer-events: none; color: var(--p); font-family: 'Orbitron'; font-weight: bold; animation: v5-fly 0.7s ease-out forwards; z-index: 1000; text-shadow: 0 0 8px #000; }
        @keyframes v5-fly { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-120px); } }

        /* LOADER FORÇADO */
        #v5-loader { position: fixed; inset: 0; background: #000; z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .v5-bar-bg { width: 200px; height: 3px; background: #111; margin-top: 20px; }
        #v5-bar-fill { width: 0%; height: 100%; background: var(--p); box-shadow: 0 0 10px var(--p); transition: 0.1s; }

        /* UI PRINCIPAL */
        .v5-header { text-align: center; padding: 40px 20px 20px; border-bottom: 1px solid #111; }
        .v5-balance { font-family: 'Orbitron'; font-size: 42px; margin: 10px 0; }
        
        .v5-main-clicker { position: relative; margin: 40px auto; width: 220px; height: 220px; cursor: pointer; }
        .v5-img { width: 100%; height: 100%; border-radius: 40px; object-fit: cover; border: 2px solid #222; transition: 0.1s; }
        .v5-img:active { transform: scale(0.94); border-color: var(--p); }

        /* MARKET E ABAS */
        .v5-tab-box { display: none; padding: 20px; height: 60vh; overflow-y: auto; padding-bottom: 100px; }
        .v5-tab-box.active { display: block; }
        .v5-item { display: flex; align-items: center; gap: 15px; background: #080808; padding: 15px; border-radius: 15px; margin-bottom: 10px; border: 1px solid #111; }
        .v5-item img { width: 45px; height: 45px; border-radius: 8px; filter: hue-rotate(90deg); }
        .v5-info { flex: 1; }
        .v5-name { font-family: 'Orbitron'; font-size: 13px; margin-bottom: 3px; }
        .v5-meta { font-size: 10px; color: #555; }
        .v5-btn { background: var(--accent); border: none; color: white; padding: 8px 12px; border-radius: 8px; font-family: 'Orbitron'; font-size: 10px; }

        /* NAV BAR */
        .v5-nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #000; border-top: 1px solid #111; padding-bottom: 20px; }
        .v5-nav-btn { flex: 1; padding: 15px; text-align: center; font-size: 10px; font-family: 'Orbitron'; color: #444; }
        .v5-nav-btn.active { color: white; border-top: 2px solid var(--p); }
    </style>
</head>
<body>

    <div class="v5-lang-bar">
        <button class="v5-lang-btn active" id="btn-pt" onclick="changeLang('pt')">PT</button>
        <button class="v5-lang-btn" id="btn-en" onclick="changeLang('en')">EN</button>
        <button class="v5-lang-btn" id="btn-ru" onclick="changeLang('ru')">RU</button>
    </div>

    <div id="v5-loader">
        <div id="v5-load-txt" style="font-family: Orbitron; font-size: 12px;">SYSTEM BOOT...</div>
        <div class="v5-bar-bg"><div id="v5-bar-fill"></div></div>
    </div>

    <div class="v5-header">
        <div id="v5-balance" class="v5-balance">0.00000</div>
        <div id="txt-sub" style="font-size: 10px; color: var(--p); letter-spacing: 3px;">DATABASE CONNECTED</div>
    </div>

    <div id="tab-mine" class="v5-tab-box active" style="text-align:center">
        <div class="v5-main-clicker" id="clicker">
            <img src="image_3.jpg?v=999" class="v5-img">
        </div>
        <div style="font-family: Orbitron; font-size: 14px; color: #ffdd00;">ENERGY: <span id="v5-energy">500</span>/500</div>
        <div style="width: 180px; height: 4px; background: #111; margin: 10px auto; border-radius: 10px; overflow: hidden;">
            <div id="v5-energy-bar" style="height:100%; background: orange; width: 100%;"></div>
        </div>
    </div>

    <div id="tab-market" class="v5-tab-box"><div id="v5-shop"></div></div>
    <div id="tab-friends" class="v5-tab-box">
        <h3 id="txt-net">NETWORK</h3>
        <div style="background:#050505; padding:15px; border:1px solid #222; font-size:10px; color:var(--p)" id="v5-ref">https://t.me/EuroDashMinerBot?start=22250</div>
    </div>

    <div class="v5-nav">
        <div class="v5-nav-btn active" id="n-mine" onclick="goTab('mine')">CORE</div>
        <div class="v5-nav-btn" id="n-market" onclick="goTab('market')">MARKET</div>
        <div class="v5-nav-btn" id="n-friends" onclick="goTab('friends')">NET</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // DICIONÁRIO MULTI-LÍNGUA
        const langData = {
            pt: { sub: "PAINEL DE CONTROLO", buy: "MELHORAR", cost: "Custo", owned: "Nível", net: "REDE DE AFILIADOS", miners: ["Nó Micro", "Rack Blade", "Turbo Server", "Estação Cyber", "Quantum Rig", "Hub Neural", "Núcleo Titan"] },
            en: { sub: "DASHBOARD CONTROL", buy: "UPGRADE", cost: "Cost", owned: "Level", net: "AFFILIATE NETWORK", miners: ["Micro Node", "Blade Rack", "Turbo Server", "Cyber Station", "Quantum Rig", "Neural Hub", "Titan Core"] },
            ru: { sub: "ПАНЕЛЬ УПРАВЛЕНИЯ", buy: "КУПИТЬ", cost: "Цена", owned: "Уровень", net: "ПАРТНЕРСКАЯ СЕТЬ", miners: ["Микро Узел", "Blade Стойка", "Турбо Сервер", "Кибер Станция", "Квантовый Риг", "Нейро Хаб", "Ядро Титана"] }
        };
        let curLang = 'pt';

        // CONFIG FIREBASE
        const fbConfig = {
            apiKey: "AIzaSyDFpFu8sba50rqnJSstg--cLrNDG4ybmu8",
            authDomain: "eurodash-e466c.firebaseapp.com",
            databaseURL: "https://eurodash-e466c-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "eurodash-e466c",
            appId: "1:99813963051:web:fe96761e990aee01ec016e"
        };
        firebase.initializeApp(fbConfig);
        const rtdb = firebase.database();
        const uid = tg.initDataUnsafe.user?.id || 22250;

        let user = { balance: 0, pps: 0, energy: 500, inventory: [0,0,0,0,0,0,0], last: Date.now() };
        let isReady = false;

        const shop = [
            { p: 0.05, g: 0.00000010, img: "https://cdn-icons-png.flaticon.com/512/2103/2103633.png" },
            { p: 1.00, g: 0.00000060, img: "https://cdn-icons-png.flaticon.com/512/908/908905.png" },
            { p: 10.00, g: 0.00000750, img: "https://cdn-icons-png.flaticon.com/512/2906/2906236.png" },
            { p: 50.00, g: 0.00004500, img: "https://cdn-icons-png.flaticon.com/512/4342/4342657.png" },
            { p: 200.00, g: 0.00021000, img: "https://cdn-icons-png.flaticon.com/512/6042/6042215.png" },
            { p: 800.00, g: 0.00095000, img: "https://cdn-icons-png.flaticon.com/512/3665/3665879.png" },
            { p: 3000.00, g: 0.00450000, img: "https://cdn-icons-png.flaticon.com/512/2592/2592271.png" }
        ];

        function changeLang(l) {
            curLang = l;
            document.querySelectorAll('.v5-lang-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-'+l).classList.add('active');
            document.getElementById('txt-sub').innerText = langData[l].sub;
            document.getElementById('txt-net').innerText = langData[l].net;
            if(document.getElementById('tab-market').classList.contains('active')) renderV5Shop();
        }

        rtdb.ref('users/' + uid).once('value', (s) => {
            if(s.exists()) {
                user = s.val();
                if(!user.inventory) user.inventory = [0,0,0,0,0,0,0];
            }
            startV5();
        });

        function startV5() {
            let p = 0;
            const t = setInterval(() => {
                p += 5; document.getElementById('v5-bar-fill').style.
