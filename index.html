<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EURODASH V11</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; text-align: center; overflow: hidden; }
        .lang-bar { display: flex; justify-content: center; gap: 8px; padding: 15px; background: #111; border-bottom: 2px solid #0f9; }
        .t-btn { background: #222; color: #0f9; border: 1px solid #0f9; padding: 6px 12px; border-radius: 8px; font-weight: bold; font-size: 12px; }
        .t-btn.active { background: #0f9; color: #000; }
        #balance { font-size: 45px; margin: 20px 0; font-weight: bold; color: #0f9; }
        .main-img { width: 180px; height: 180px; border-radius: 50%; border: 4px solid #0f9; box-shadow: 0 0 20px #0f9; }
        .main-img:active { transform: scale(0.95); }
        .tab { display: none; padding: 20px; height: 70vh; overflow-y: auto; }
        .item { background: #0a0a0a; border: 1px solid #1a1a1a; padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #000; border-top: 1px solid #222; padding-bottom: 20px; }
        .n-btn { flex: 1; padding: 20px; color: #555; font-weight: bold; cursor: pointer; }
        .n-btn.active { color: #0f9; }
    </style>
</head>
<body>

    <div class="lang-bar">
        <button class="t-btn active" onclick="setL('pt')">PT</button>
        <button class="t-btn" onclick="setL('en')">EN</button>
        <button class="t-btn" onclick="setL('ru')">RU</button>
    </div>

    <div id="core-p" class="tab" style="display:block;">
        <div id="balance">0.00000</div>
        <img src="https://via.placeholder.com/180/000000/00ff99?text=EURODASH" class="main-img" onclick="ck()">
        <p style="color:#0f9; margin-top:20px;">ENERGY: <span id="eg">500</span></p>
    </div>

    <div id="shop-p" class="tab">
        <h2 id="m-tit">MERCADO</h2>
        <div id="list"></div>
    </div>

    <div class="nav">
        <div class="n-btn active" id="nb-c" onclick="sw('c')">CORE</div>
        <div class="n-btn" id="nb-s" onclick="sw('s')">MARKET</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let L = 'pt';
        const txt = {
            pt: { m: "MERCADO", b: "COMPRAR", names: ["Nó Micro","Rack Blade","Turbo Server","Cyber Station","Quantum Rig","Hub Neural","Núcleo Titan"] },
            en: { m: "MARKET", b: "UPGRADE", names: ["Micro Node","Blade Rack","Turbo Server","Cyber Station","Quantum Rig","Neural Hub","Titan Core"] },
            ru: { m: "РЫНОК", b: "КУПИТЬ", names: ["Микро Узел","Blade Стойка","Турбо Сервер","Кибер Станция","Квантовый Риг","Нейро Хаб","Ядро Титана"] }
        };

        firebase.initializeApp({
            apiKey: "AIzaSyDFpFu8sba50rqnJSstg--cLrNDG4ybmu8",
            authDomain: "eurodash-e466c.firebaseapp.com",
            databaseURL: "https://eurodash-e466c-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "eurodash-e466c",
            appId: "1:99813963051:web:fe96761e990aee01ec016e"
        });
        const db = firebase.database();
        const id = tg.initDataUnsafe.user?.id || 22250;
        let u = { bal: 0, pps: 0, eng: 500, inv: [0,0,0,0,0,0,0] };
        const sk = [{p:0.05,g:0.00001},{p:1,g:0.00006},{p:10,g:0.00075},{p:50,g:0.0045},{p:200,g:0.021},{p:800,g:0.095},{p:3000,g:0.45}];

        function setL(l) {
            L = l;
            document.querySelectorAll('.t-btn').forEach(b => b.classList.toggle('active', b.innerText.toLowerCase() === l));
            document.getElementById('m-tit').innerText = txt[l].m;
            if(document.getElementById('shop-p').style.display === 'block') rd();
        }

        db.ref('users/'+id).once('value', s => { if(s.exists()) u = s.val(); up(); });

        function ck() {
            if(u.eng < 1) return;
            u.bal += 0.00005; u.eng -= 1;
            up(); tg.HapticFeedback.impactOccurred('light');
        }

        function rd() {
            document.getElementById('list').innerHTML = sk.map((m,i) => `
                <div class="item">
                    <div style="text-align:left"><b>${txt[L].names[i]}</b><br><small>Lvl: ${u.inv[i]||0}</small></div>
                    <button onclick="buy(${i})" style="background:#0f9; border:none; padding:8px; border-radius:5px; font-weight:bold">${txt[L].b} €${m.p}</button>
                </div>
            `).join('');
        }

        function buy(i) {
            if(u.bal >= sk[i].p) {
                u.bal -= sk[i].p; u.pps += sk[i].g;
                u.inv[i] = (u.inv[i]||0)+1; rd(); up();
            }
        }

        function up() {
            document.getElementById('balance').innerText = u.bal.toFixed(5);
            document.getElementById('eg').innerText = Math.floor(u.eng);
        }

        function sw(t) {
            document.getElementById('core-p').style.display = t === 'c' ? 'block' : 'none';
            document.getElementById('shop-p').style.display = t === 's' ? 'block' : 'none';
            document.getElementById('nb-c').classList.toggle('active', t === 'c');
            document.getElementById('nb-s').classList.toggle('active', t === 's');
            if(t === 's') rd();
        }

        setInterval(() => { u.bal += u.pps; if(u.eng < 500) u.eng += 0.5; up(); }, 1000);
        setInterval(() => db.ref('users/'+id).set(u), 5000);
    </script>
</body>
</html>
