<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EURO V10</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; text-align: center; }
        .tabs { display: flex; background: #111; padding: 10px; justify-content: center; gap: 10px; }
        .t-btn { background: #222; color: #0f9; border: 1px solid #0f9; padding: 5px 10px; border-radius: 5px; font-size: 12px; }
        .t-btn.active { background: #0f9; color: #000; }
        #balance { font-size: 40px; margin: 20px 0; color: #fff; }
        .circle { width: 200px; height: 200px; border-radius: 50%; border: 4px solid #0f9; margin: 20px auto; display: block; }
        .shop-p { display: none; padding: 20px; padding-bottom: 100px; }
        .item { background: #111; border: 1px solid #222; margin: 10px 0; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; }
        .nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #000; border-top: 1px solid #222; }
        .n-btn { flex: 1; padding: 20px; color: #555; font-weight: bold; }
        .n-btn.active { color: #0f9; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="t-btn active" onclick="setL('pt')">PT</button>
        <button class="t-btn" onclick="setL('en')">EN</button>
        <button class="t-btn" onclick="setL('ru')">RU</button>
    </div>

    <div id="core-p">
        <div id="balance">0.00000</div>
        <img src="image_3.jpg" class="circle" onclick="ck()">
        <p>ENERGY: <span id="eg">500</span></p>
    </div>

    <div id="shop-p" class="shop-p">
        <h2 id="m-tit">MERCADO</h2>
        <div id="list"></div>
    </div>

    <div class="nav">
        <div class="n-btn active" id="nb-c" onclick="sw('c')">CORE</div>
        <div class="n-btn" id="nb-s" onclick="sw('s')">MARKET</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        let L = 'pt';
        const txt = {
            pt: { m: "MERCADO", b: "UPGRADE", names: ["Nó 1","Nó 2","Nó 3","Nó 4","Nó 5","Nó 6","Nó 7"] },
            en: { m: "MARKET", b: "UPGRADE", names: ["Node 1","Node 2","Node 3","Node 4","Node 5","Node 6","Node 7"] },
            ru: { m: "РЫНОК", b: "КУПИТЬ", names: ["Узел 1","Узел 2","Узел 3","Узел 4","Узел 5","Узел 6","Узел 7"] }
        };

        firebase.initializeApp({
            apiKey: "AIzaSyDFpFu8sba50rqnJSstg--cLrNDG4ybmu8",
            authDomain: "eurodash-e466c.firebaseapp.com",
            databaseURL: "https://eurodash-e466c-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "eurodash-e466c",
            appId: "1:99813963051:web:fe96761e990aee01ec016e"
        });
        const db = firebase.database();
        const id = tg.initDataUnsafe.user?.id || 22250;
        let u = { bal: 0, pps: 0, eng: 500, inv: [0,0,0,0,0,0,0] };

        const sk = [{p:0.05,g:0.0000001},{p:1,g:0.0000006},{p:10,g:0.0000075},{p:50,g:0.000045},{p:200,g:0.00021},{p:800,g:0.00095},{p:3000,g:0.0045}];

        function setL(l) {
            L = l;
            document.querySelectorAll('.t-btn').forEach((b, i) => b.classList.toggle('active', b.innerText.toLowerCase() === l));
            document.getElementById('m-tit').innerText = txt[l].m;
            if(document.getElementById('shop-p').style.display === 'block') rd();
        }

        db.ref('users/'+id).once('value', s => { if(s.exists()) u = s.val(); up(); });

        function ck() {
            if(u.eng < 1) return;
            u.bal += 0.00005; u.eng -= 1;
            up(); tg.HapticFeedback.impactOccurred('light');
        }

        function rd() {
            document.getElementById('list').innerHTML = sk.map((m,i) => `
                <div class="item">
                    <div style="text-align:left"><b>${txt[L].names[i]}</b><br><small>Lvl: ${u.inv[i]||0}</small></div>
                    <button onclick="buy(${i})" style="background:#0f9; border:none; padding:8px; border-radius:5px; font-weight:bold">${txt[L].b} €${m.p}</button>
                </div>
            `).join('');
        }

        function buy(i) {
            if(u.bal >= sk[i].p) {
                u.bal -= sk[i].p; u.pps += sk[i].g;
                u.inv[i] = (u.inv[i]||0)+1; rd(); up();
            }
        }

        function up() {
            document.getElementById('balance').innerText = u.bal.toFixed(5);
            document.getElementById('eg').innerText = Math.floor(u.eng);
        }

        function sw(t) {
            document.getElementById('core-p').style.display = t === 'c' ? 'block' : 'none';
            document.getElementById('shop-p').style.display = t === 's' ? 'block' : 'none';
            document.getElementById('nb-c').classList.toggle('active', t === 'c');
            document.getElementById('nb-s').classList.toggle('active', t === 's');
            if(t === 's') rd();
        }

        setInterval(() => { u.bal += u.pps; if(u.eng < 500) u.eng += 0.5; up(); }, 1000);
        setInterval(() => db.ref('users/'+id).set(u), 5000);
    </script>
</body>
</html>
